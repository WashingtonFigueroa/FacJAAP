<div class="card">
    <div class="card-body">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12">
            <form [formGroup]="facturaGroup">
              <div class="row">
                <div class="col" *ngIf="clientesSearch !== null">
                  <label>* Seleccione cliente </label>
                  <ng-autocomplete class="col-sm-2 col-form-label" (selected)="Selected($event)" [classes]="['']" [group]="clientesSearch"></ng-autocomplete>
                </div>
                <div class="col">
                  <label>* SeleccioneMedidor</label>
                  <select (change)="listaLecturas()" name="idmedidor" formControlName="idmedidor" class="custom-select mr-sm-2" *ngIf="medidores != null">
                    <option [value]="medidor.idmedidor" *ngFor="let medidor of medidores">
                      {{ medidor.codigo }}
                    </option>
                  </select>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col">
                  <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                      <thead>
                        <tr>
                          <th>Observacion</th>
                          <th>Fecha</th>
                          <th>Anterior</th>
                          <th>Actual</th>
                          <th>Consumo</th>
                          <th>Excedente</th>
                          <th>Tarifa</th>
                          <th>Acciones</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let lectura of lecturas; let i = index">
                          <td>{{ lectura.observacion }}</td>
                          <td>{{ lectura.fecha }}</td>
                          <td>{{ lectura.anterior }}</td>
                          <td>{{ lectura.actual }}</td>
                          <td>{{ lectura.consumo }}</td>
                          <td>{{ lectura.excedente }}</td>
                          <td>{{ lectura.tarifa }}</td>
                          <td>
                            <button (click)="verFactura(lectura)" class="btn btn-info">Ver
                            </button>&nbsp;
                            <button (click)="pagar(lectura.idlectura, i)" [disabled]="lectura.estado === 'Pagado'" [class.btn]="true" [class.btn-danger]="lectura.estado === 'Pagado'" [class.btn-primary]="lectura.estado === 'Deber'">
                              <span *ngIf="lectura.estado === 'Deber'">Pagar</span>
                              <span *ngIf="lectura.estado === 'Pagado'">Pagado</span>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <hr>
              <div class="container-fluid">
                <div class="row">
                  <div class="col-md-4">
                    <table class="table table-striped table-bordered">
                      <thead>
                        <tr>
                          <th> Descripción </th>
                          <th> Valor </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            Agua Potable:
                          </td>
                          <td>
                            {{ factura.tarifa }}
                          </td>
                        </tr>
                        <tr>
                          <td>
                            Multas
                          </td>
                          <td>
                            {{ factura.multa }}
                          </td>
                        </tr>
                        <tr>
                          <td>
                            Subtotal
                          </td>
                          <td>
                            {{ factura.total }}
                          </td>
                        </tr>
                        <tr>
                          <td>
                            IVA
                          </td>
                          <td>
                            0.00
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <strong>TOTAL:</strong>
                          </td>
                          <td>
                            <strong>{{ factura.total }}</strong>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="col-md-8">
                      <div class="row">
                          <div class="col">
                            <label>Mes facturado:</label>&nbsp;&nbsp;&nbsp;&nbsp;
                            <label>{{ datos.mes_facturado }}</label>
                            <br>
                            <label>Servicio No.:</label>&nbsp;&nbsp;&nbsp;&nbsp;
                            <label>000000</label>
                            <br>
                          </div>
                          <div class="col">
                            <label>Dirección:</label>&nbsp;&nbsp;&nbsp;&nbsp;
                            <label>{{direccion}}</label>
                            <br>
                            <label>Factura No.:</label>&nbsp;&nbsp;&nbsp;&nbsp;
                            <label>{{ datos.cuenta }}</label>
                          </div>
                        </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

<div id="print-section" style="display: none">
  <table cellspacing=0 cellpadding=15>
    <tr>
      <td>
        <strong>MES FACTURADO: </strong> {{ datos.mes_facturado }} <br>
        <strong>SERVICIO: </strong> {{ datos.cuenta }} <br>
        <strong>CLIENTE: </strong> {{ datos.cliente }}
      </td>
      <td>
        <strong>RUC/CI: </strong> {{ datos.cedula }} <br>
        <strong>DIRECCIÓN:</strong> {{ datos.direccion }} <br>
        <strong>MEDIDOR N.:</strong> {{ datos.codigo_medidor }}
      </td>
    </tr>
  </table>
  <br>
  <table cellspacing=0 cellpadding=15>
    <thead>
    <tr>
      <th>LECTURA ANTERIOR</th>
      <th>LECTURA ACTUAL</th>
      <th>CONSUMO</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngIf="lectura !== null">
      <td>{{ lectura.anterior }}</td>
      <td>{{ lectura.actual }}</td>
      <td>{{ lectura.consumo }}</td>
    </tr>
    </tbody>
  </table>
  <br>
  <table cellspacing=0 cellpadding=15>
    <thead>
    <tr>
      <th>ESTIMADO CLIENTE</th>
      <th>DESCRIPCION</th>
      <th>VALOR</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td></td>
      <td>
        Aguar Potable <br>
        Mutlas <br>
        Sub total <br>
        IVA <br>
        <strong>Total</strong> <br>
      </td>
      <td *ngIf="factura !== null">
        {{ factura.tarifa }} <br>
        {{ factura.multa }} <br>
        {{ factura.total }} <br>
        0.00 <br>
        {{ factura.total }} <br>
      </td>
    </tr>
    </tbody>
  </table>
</div>