<div class="card">
    <div class="card-body">

      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12">
                  <form [formGroup]="facturaGroup">
                  <div class="row">
                    <div class="col-md-4">
                        <div class="col" *ngIf="clientesSearch !== null">
                            <label>* Seleccione cliente </label><br>
                            <ng-autocomplete class="col-sm-12 col-form-label" (selected)="Selected($event)" [classes]="['']" [group]="clientesSearch"></ng-autocomplete>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="col">
                            <label>* SeleccioneMedidor</label><br>
                            <select (change)="listaLecturas()" name="idmedidor" formControlName="idmedidor" class="custom-select mr-sm-2" *ngIf="medidores != null">
                              <option [value]="medidor.idmedidor" *ngFor="let medidor of medidores">
                                {{ medidor.codigo }}
                              </option>
                            </select>
                          </div>
                    </div>
                    <div class="col-md-4">
                        <div class="col">
                            <label>Mes facturado:</label>&nbsp;&nbsp;&nbsp;&nbsp;
                            <label>{{ datos.mes_facturado }}</label>
                          </div>
                          <div class="col">
                            <label>Dirección:</label>&nbsp;&nbsp;&nbsp;&nbsp;
                            <label>{{direccion}}</label>
                          </div>
                    </div>
                  </div>
                  <hr>
              <div class="row">
                <div class="col">
                  <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                      <thead>
                        <tr>
                          <th>Observacion</th>
                          <th>Fecha</th>
                          <th>Anterior</th>
                          <th>Actual</th>
                          <th>Consumo</th>
                          <th>Excedente</th>
                          <th>Tarifa</th>
                          <th>Acciones</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let lectura of lecturas; let i = index">
                          <td>{{ lectura.observacion }}</td>
                          <td>{{ lectura.fecha }}</td>
                          <td>{{ lectura.anterior }}</td>
                          <td>{{ lectura.actual }}</td>
                          <td>{{ lectura.consumo }}</td>
                          <td>{{ lectura.excedente }}</td>
                          <td>{{ lectura.tarifa | currency:"CAD":"symbol-narrow" }}</td>
                          <td>
                            <button (click)="verFactura(lectura)" class="btn btn-info">Ver
                            </button>&nbsp;&nbsp;&nbsp;
                            <button
                              (click)="pagar(lectura.idlectura, i)"
                              [disabled]="lectura.estado === 'Pagado' || !ver"
                              [class.btn]="true" [class.btn-danger]="lectura.estado === 'Pagado'" [class.btn-primary]="lectura.estado === 'Deber'">
                              <span *ngIf="lectura.estado === 'Deber'">Pagar</span>
                              <span *ngIf="lectura.estado === 'Pagado'">Pagado</span>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>




              <hr>
              <div class="container-fluid">
                <div class="row">
                  <div class="col-md-12">
                    <table class="table table-striped table-bordered" align="center">
                      <thead>
                        <tr>
                          <th> Descripción </th>
                          <th> Valor </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            Agua Potable:
                          </td>
                          <td>
                            {{ factura.tarifa | currency:"CAD":"symbol-narrow"}}
                          </td>
                        </tr>
                        <tr>
                          <td>
                            Multas
                          </td>
                          <td>
                            {{ factura.multa | currency:"CAD":"symbol-narrow"}}
                          </td>
                        </tr>
                        <tr>
                          <td>
                            Subtotal
                          </td>
                          <td>
                            {{ factura.total | currency:"CAD":"symbol-narrow"}}
                          </td>
                        </tr>
                        <tr>
                          <td>
                            IVA
                          </td>
                          <td>
                            0.00
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <strong>TOTAL:</strong>
                          </td>
                          <td>
                            <strong>{{ factura.total | currency:"CAD":"symbol-narrow"}}</strong>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                </div>
              </div>
            </form>
          </div>
      </div>
    </div>



  </div>
</div>

<!-- Impresion Comprobante"  -->

<div id="print-section" style="display: none">
    <table cellpadding=2 align="center">
    <tr>
      <td colspan="2">RUC/CI: {{ datos.cedula }}</td>
      <td>MES FACTURADO: {{ datos.mes_facturado }}</td>
    </tr>
    <tr>
      <td colspan="2">CLIENTE: {{ datos.cliente }}</td>
      <td>SERVICIO: {{ datos.cuenta }}</td>
    </tr>
    <tr>
      <td colspan="2">DIRECCIÓN: {{ datos.direccion }}</td>
      <td>MEDIDOR: {{ datos.codigo_medidor }}</td>
    </tr>
    <tr>
        <th>LECTURA ANTERIOR</th>
        <th>LECTURA ACTUAL</th>
        <th>CONSUMO</th>
      </tr>
    <tr *ngIf="lectura !== null" align="center">
        <td>{{ lectura.anterior }}</td>
        <td>{{ lectura.actual }}</td>
        <td>{{ lectura.consumo }}</td>
      </tr>
    <tr>
      <th>TOTAL COBRADO</th>
      <th>DESCRIPCION</th>
      <th>VALOR</th>
    </tr>
    <tr *ngIf="factura !== null">
     <th rowspan="5" align="center">
       <pre>


_______________
PRESIDENTE


_______________
RECAUDADOR
       </pre>
     </th>
      <td align="center" >Agua Potable:</td>
      <td align="center" > {{ factura.tarifa | currency:"CAD":"symbol-narrow"}} </td>
    </tr>
    <tr>
      <td align="center" >Multas:</td>
      <td align="center" >{{ factura.multa | currency:"CAD":"symbol-narrow"}} </td>
    </tr>
    <tr>
       <td align="center" >Sub Total:</td>
      <td align="center" >{{ factura.total | currency:"CAD":"symbol-narrow"}}</td>
     </tr>
     <tr>
       <td align="center" >IVA:</td>
      <td align="center" >0.00</td>
     </tr>
     <tr>
       <td align="center" ><strong> TOTAL:</strong></td>
      <td align="center" ><strong>{{ factura.total | currency:"CAD":"symbol-narrow"}}</strong></td>
     </tr>
    </table>
</div>
